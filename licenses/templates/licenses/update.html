{% extends 'base.html' %}

{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}

<h1>
    {% blocktranslate %}
        Edit {{object}}:
    {% endblocktranslate %}
</h1>

{% if object.confirmed %}
<p>
    {% blocktranslate %}
        Your License is already confirmed and no longer editable.
    {% endblocktranslate %}
</p>
<a class="btn btn-primary" href="{% url 'licenses:licenses' %}"> {% translate 'Back to overview'%}</a>
{% else %}
    {% crispy form %}
{% endif %}

{% endblock content %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'licenses/css/tags_input.css' %}">
<style>
    #div_id_youth_protection_category {
        display: none; /* Initially hide the row */
    }
</style>
{% endblock %}

{% block extra_js %}
<script src="{% static 'licenses/js/tags_input.js' %}"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const youthProtectionField = document.getElementById("id_youth_protection_necessary");
    const youthCategoryRow = document.getElementById("div_id_youth_protection_category");

    function toggleYouthCategoryRow() {
        if (youthProtectionField.value === "true") {
            youthCategoryRow.style.display = "block";
        } else {
            youthCategoryRow.style.display = "none";
        }
    }

    if (youthProtectionField) {
        youthProtectionField.addEventListener("change", toggleYouthCategoryRow);
        toggleYouthCategoryRow(); // Initialize visibility
    }
});

</script>
{% endblock %}
