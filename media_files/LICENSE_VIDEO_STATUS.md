# License Video Status Column

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ "Video" –≤ —Å–ø–∏—Å–æ–∫ –ª–∏—Ü–µ–Ω–∑–∏–π (`/admin/licenses/license/`), –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è.

## –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ

**–ü—É—Ç—å:** Licenses > License (—Å–ø–∏—Å–æ–∫ –ª–∏—Ü–µ–Ω–∑–∏–π)

**–ü–æ–∑–∏—Ü–∏—è:** –ü–æ—Å–ª–µ –∫–æ–ª–æ–Ω–∫–∏ "GENEHMIGT" (Genehmigt)

## –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

### üé¨ Available (–ï—Å—Ç—å –≤–∏–¥–µ–æ, –¥–æ—Å—Ç—É–ø–Ω–æ)
```
üé¨ Available
‚ñ∂Ô∏è Play
```
- **–ò–∫–æ–Ω–∫–∞:** üé¨ –∑–µ–ª–µ–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
- **–°—Ç–∞—Ç—É—Å:** "Available"
- **–°—Å—ã–ª–∫–∞:** ‚ñ∂Ô∏è Play (—Å–∏–Ω—è—è —Å—Å—ã–ª–∫–∞, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ)

### ‚ö†Ô∏è Not available (–ï—Å—Ç—å –≤–∏–¥–µ–æ, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ)
```
‚ö†Ô∏è Not available
```
- **–ò–∫–æ–Ω–∫–∞:** ‚ö†Ô∏è –∂–µ–ª—Ç–æ–≥–æ —Ü–≤–µ—Ç–∞
- **–°—Ç–∞—Ç—É—Å:** "Not available"
- **–ü—Ä–∏—á–∏–Ω–∞:** –§–∞–π–ª –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ `is_available=False`

### ‚ùå No video (–ù–µ—Ç –≤–∏–¥–µ–æ)
```
‚ùå No video
```
- **–ò–∫–æ–Ω–∫–∞:** ‚ùå —Å–µ—Ä–æ–≥–æ —Ü–≤–µ—Ç–∞
- **–°—Ç–∞—Ç—É—Å:** "No video"
- **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ VideoFile —Å —ç—Ç–∏–º –Ω–æ–º–µ—Ä–æ–º –ª–∏—Ü–µ–Ω–∑–∏–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
- `licenses/admin.py` - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `video_status()` –∏ –æ–±–Ω–æ–≤–ª–µ–Ω `list_display`

### –ú–µ—Ç–æ–¥ `video_status(obj)`:
```python
def video_status(self, obj):
    """Display video status and play link in list view."""
    try:
        video_file = obj.get_video_file()
        if video_file:
            if video_file.is_available:
                play_url = reverse('admin:media_files_videofile_stream', args=[video_file.id])
                return format_html(
                    '<span style="color: #28a745;">üé¨ {}</span><br>'
                    '<a href="#" onclick="window.open(\'{}\', \'video\', \'width=800,height=600\'); return false;">‚ñ∂Ô∏è {}</a>',
                    _('Available'), play_url, _('Play')
                )
            else:
                return format_html('<span style="color: #ffc107;">‚ö†Ô∏è {}</span>', _('Not available'))
        else:
            return format_html('<span style="color: #999;">‚ùå {}</span>', _('No video'))
    except Exception:
        return format_html('<span style="color: #999;">-</span>')
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
```python
def get_queryset(self, request):
    """Optimize queryset with select_related and prefetch_related."""
    return super().get_queryset(request).prefetch_related(
        Prefetch(
            'videofile_set',
            queryset=VideoFile.objects.select_related('storage_location').filter(is_available=True),
            to_attr='available_videos'
        )
    )
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –≤–∏–¥–µ–æ:
1. –û—Ç–∫—Ä—ã—Ç—å Licenses > License
2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–ª–æ–Ω–∫—É "Video" –ø–æ—Å–ª–µ "GENEHMIGT"
3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ –∏–∫–æ–Ω–∫–µ –∏ —Ç–µ–∫—Å—Ç—É

### –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ:
1. –ù–∞–π—Ç–∏ –ª–∏—Ü–µ–Ω–∑–∏—é —Å —Å—Ç–∞—Ç—É—Å–æ–º "üé¨ Available"
2. –ù–∞–∂–∞—Ç—å –Ω–∞ —Å—Å—ã–ª–∫—É "‚ñ∂Ô∏è Play"
3. –í–∏–¥–µ–æ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤–æ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–º –æ–∫–Ω–µ (800x600px) —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –ø–ª–µ–µ—Ä–æ–º

### –ü–æ–∏—Å–∫ –≤–∏–¥–µ–æ –¥–ª—è –ª–∏—Ü–µ–Ω–∑–∏–∏:
1. –ù–∞–π—Ç–∏ –ª–∏—Ü–µ–Ω–∑–∏—é —Å —Å—Ç–∞—Ç—É—Å–æ–º "‚ùå No video"
2. –û—Ç–∫—Ä—ã—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é (–∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ)
3. –í –ø–æ–ª–µ "Video File" –Ω–∞–∂–∞—Ç—å "üîç Search for Video"
4. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Å—Å–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ "Search for videos in storage"

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
- –ü—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â –≤–∏–¥–µ–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è —Å –ª–∏—Ü–µ–Ω–∑–∏—è–º–∏
- –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### System Management:
- –ö–æ–º–∞–Ω–¥–∞ "Link Orphan Licenses" –Ω–∞—Ö–æ–¥–∏—Ç –≤–∏–¥–µ–æ –¥–ª—è –ª–∏—Ü–µ–Ω–∑–∏–π –±–µ–∑ —Ñ–∞–π–ª–æ–≤
- –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏—Ç—Å—è —Å "‚ùå No video" –Ω–∞ "üé¨ Available"

### –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ:
- –ü—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤–∏–¥–µ–æ –≤ playout —Å—Ç–∞—Ç—É—Å –æ—Å—Ç–∞–µ—Ç—Å—è "üé¨ Available"
- –ü—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –≤ –∞—Ä—Ö–∏–≤ —Å—Ç–∞—Ç—É—Å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ "‚ö†Ô∏è Not available" –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

## –ü—Ä–∏–º–µ—Ä—ã

### –°–ø–∏—Å–æ–∫ –ª–∏—Ü–µ–Ω–∑–∏–π:
```
TITEL          | UNTERTITEL | PROFIL | NUMMER | DAUER  | ERSTELLT AM | GENEHMIGT | VIDEO
–¢–µ—Å—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ | Test Video | None   | 99999  | 0:00:20| 12.10.2025  | ‚úó        | üé¨ Available
                                                                               ‚ñ∂Ô∏è Play
```

### –ü–æ—Å–ª–µ –ø–æ–∏—Å–∫–∞ –≤–∏–¥–µ–æ:
```
TITEL          | UNTERTITEL | PROFIL | NUMMER | DAUER  | ERSTELLT AM | GENEHMIGT | VIDEO
–¢–µ—Å—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ | Test Video | None   | 99999  | 0:00:20| 12.10.2025  | ‚úó        | üé¨ Available
                                                                               ‚ñ∂Ô∏è Play
```

### –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ:
- **–†–∞–∑–º–µ—Ä:** 800x600 –ø–∏–∫—Å–µ–ª–µ–π
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ —Å –∏–º–µ–Ω–µ–º 'video'
- **–ü–ª–µ–µ—Ä:** HTML5 video —Å –∫–æ–Ω—Ç—Ä–æ–ª–∞–º–∏
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** Range requests –¥–ª—è –ø–µ—Ä–µ–º–æ—Ç–∫–∏

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –í–∏–¥–µ–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω–æ–º–µ—Ä–∞ –ª–∏—Ü–µ–Ω–∑–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `99999_video.mp4`)
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –≤–∏–¥–µ–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ª–∏—Ü–µ–Ω–∑–∏–∏

### –°—Å—ã–ª–∫–∞ Play –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–∏–¥–µ–æ –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ `is_available=True`
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ –¥–∏—Å–∫–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞:
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ `prefetch_related`
- –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ª–∏—Ü–µ–Ω–∑–∏–π –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è
